<!DOCTYPE html>
<html>
  <head>
    <title>SSO Progressive Web App</title>
    <%= stylesheet_link_tag 'pwa' %>
    <%= javascript_pack_tag 'pwa_main' %>
  </head>

  <body>
    <h1>Pwa#main</h1>
    <p>Find me in app/views/pwa/main.html.erb</p>
  </body>

  <script>
    import register_main_service_worker from pwa_main;
    
    // TODO: Apparently this can fail on older/incompatible browsers, might
    // TODO: need to be made more robust
    document.addEventListener('DOMContentLoaded', function(){
	console.log("Document ready, registering the main service worker");
	register_main_service_worker();
	console.log("All done.");
    });
  </script>
  
</html>
